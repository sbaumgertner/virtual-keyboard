{"version":3,"file":"script.js","mappings":";;;;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,gCAAgC,EAAE,wBAAwB;AACpF;;AAEA,uBAAuB;AACvB,2CAA2C,EAAE,YAAY;AACzD,gDAAgD,cAAc;AAC9D,+CAA+C,aAAa;AAC5D,qDAAqD,mBAAmB;AACxE;AACA;AACA,2CAA2C,YAAY;AACvD,gDAAgD,cAAc;AAC9D,+CAA+C,aAAa;AAC5D,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;;;;;;;;;;;;;;;;;UC5BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACNsC,WAAW;AAClB;;AAE/B;AACA;AACA;AACA;AACA,oBAAoB,wCAAG;AACvB;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8CAAI;;AAE3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA,GAAG;AACH,+CAA+C,QAAQ;AACvD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,YAAY,EAAE,QAAQ;AAC3C;AACA,IAAI;AACJ;AACA;AACA,qBAAqB,MAAM,EAAE,QAAQ,EAAE,IAAI;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6CAA6C,SAAS;AACtD;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,+CAA+C,2BAA2B;AAC1E;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;AC/PA","sources":["webpack://virtual-keyboard/./src/js/Key.js","webpack://virtual-keyboard/webpack/bootstrap","webpack://virtual-keyboard/webpack/runtime/define property getters","webpack://virtual-keyboard/webpack/runtime/hasOwnProperty shorthand","webpack://virtual-keyboard/webpack/runtime/make namespace object","webpack://virtual-keyboard/./src/index.js","webpack://virtual-keyboard/./src/sass/style.scss"],"sourcesContent":["export class Key {\n  constructor(src) {\n    this.keyCode = src.keyCode;\n    this.code = src.code;\n    this.en = src.en;\n    this.ru = src.ru;\n    this.special = src.special;\n  }\n\n  generateHTML() {\n    const key = document.createElement('div');\n    key.className = `key${this.special ? ' special' : ''} ${this.code.toLowerCase()}`;\n    key.setAttribute('data-code', this.code);\n\n    key.innerHTML = `${'<div class=\"en\">'\n                + '<span class=\"regular\">'}${this.en.key}</span>`\n                + `<span class=\"shift hidden\">${this.en.shift}</span>`\n                + `<span class=\"caps hidden\">${this.en.caps}</span>`\n                + `<span class=\"caps-shift hidden\">${this.en.shift_caps}</span>`\n            + '</div>'\n            + '<div class=\"ru hidden\">'\n                + `<span class=\"regular\">${this.ru.key}</span>`\n                + `<span class=\"shift hidden\">${this.ru.shift}</span>`\n                + `<span class=\"caps hidden\">${this.ru.caps}</span>`\n                + `<span class=\"caps-shift hidden\">${this.ru.shift_caps}</span>`\n            + '</div>';\n    return key;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import keys from './js/keyboard.json';// assert {type: 'json'};\nimport { Key } from './js/Key';\n\nfunction generateRow(keysArray) {\n  const row = document.createElement('div');\n  row.className = 'keyboard__row';\n  keysArray.forEach((keyData) => {\n    const key = new Key(keyData);\n    row.appendChild(key.generateHTML());\n  });\n  return row;\n}\n\nfunction generateKeyboard(data) {\n  const keyboard = document.createElement('div');\n  keyboard.className = 'keyboard';\n  data.forEach((dataRow) => {\n    keyboard.appendChild(generateRow(dataRow));\n  });\n  return keyboard;\n}\n\nfunction generateDocument() {\n  const wrapper = document.createElement('div');\n  wrapper.className = 'wrapper';\n  wrapper.innerHTML = '<h1 class=\"h1\">Virtual keyboard</h1>'\n    + '<textarea class=\"keyboard-input\"></textarea>';\n  wrapper.appendChild(generateKeyboard(keys));\n\n  const os = document.createElement('p');\n  os.className = 'os-info';\n  os.innerHTML = 'Created in the Windows OS';\n  wrapper.appendChild(os);\n\n  const lang = document.createElement('p');\n  lang.className = 'lang-info';\n  lang.innerHTML = 'Switch language: left ctrl + alt';\n  wrapper.appendChild(lang);\n\n  document.body.appendChild(wrapper);\n}\n\nlet onLang;\nlet offLang;\nconst pressed = new Set();\nlet mousePressed = '';\nlet cursorPosition = -1;\n\nlet input;\n\nfunction setLocalStorage() {\n  localStorage.setItem('lang', onLang);\n}\n\nfunction getLocalStorage() {\n  if (localStorage.getItem('lang')) {\n    onLang = localStorage.getItem('lang');\n  } else onLang = 'en';\n  offLang = (onLang === 'en') ? 'ru' : 'en';\n}\n\nfunction initLang() {\n  const onArr = document.querySelectorAll(`.${onLang}`);\n  onArr.forEach((item) => {\n    item.classList.remove('hidden');\n  });\n  const offArr = document.querySelectorAll(`.${offLang}`);\n  offArr.forEach((item) => {\n    item.classList.add('hidden');\n  });\n}\n\nfunction changeLang() {\n  const tmp = onLang;\n  onLang = offLang;\n  offLang = tmp;\n  initLang();\n}\n\nfunction insertKeyInput(content) {\n  if (cursorPosition < 0 || cursorPosition >= input.value.length) {\n    input.value = `${input.value}${content}`;\n    cursorPosition = input.value.length;\n  } else {\n    const start = input.value.substring(0, cursorPosition);\n    const end = input.value.substring(cursorPosition);\n    input.value = `${start}${content}${end}`;\n    cursorPosition += 1;\n  }\n  input.selectionStart = cursorPosition;\n  input.selectionEnd = cursorPosition;\n}\n\nfunction addInput(keyEl) {\n  const lang = keyEl.querySelector(`.${onLang}`);\n  const shift = pressed.has('ShiftLeft') || pressed.has('ShiftRight');\n  const caps = pressed.has('CapsLock');\n  let key = '';\n  if (!shift && !caps) {\n    key = lang.querySelector('.regular');\n  } else if (shift && !caps) {\n    key = lang.querySelector('.shift');\n  } else if (!shift && caps) {\n    key = lang.querySelector('.caps');\n  } else {\n    key = lang.querySelector('.caps-shift');\n  }\n  insertKeyInput(key.textContent);\n}\n\nfunction deleteKey(next) {\n  const pos = next ? cursorPosition : cursorPosition - 1;\n  if (pos >= 0 && pos < input.value.length) {\n    input.value = input.value.substring(0, pos)\n                      + input.value.substring(pos + 1);\n  }\n  if (!next) {\n    cursorPosition -= 1;\n  }\n}\n\nfunction switchHiddenKeys(keysArr, isHidden) {\n  keysArr.forEach((item) => {\n    if (isHidden) {\n      item.classList.add('hidden');\n    } else {\n      item.classList.remove('hidden');\n    }\n  });\n}\n\nfunction updateKeys() {\n  const shift = pressed.has('ShiftLeft') || pressed.has('ShiftRight');\n  const caps = pressed.has('CapsLock');\n\n  const regularKeys = document.querySelectorAll('.regular');\n  const shiftKeys = document.querySelectorAll('.shift');\n  const capsKeys = document.querySelectorAll('.caps');\n  const capsShiftKeys = document.querySelectorAll('.caps-shift');\n  if (!shift && !caps) {\n    switchHiddenKeys(regularKeys, false);\n    switchHiddenKeys(shiftKeys, true);\n    switchHiddenKeys(capsKeys, true);\n    switchHiddenKeys(capsShiftKeys, true);\n  } else if (shift && !caps) {\n    switchHiddenKeys(regularKeys, true);\n    switchHiddenKeys(shiftKeys, false);\n    switchHiddenKeys(capsKeys, true);\n    switchHiddenKeys(capsShiftKeys, true);\n  } else if (!shift && caps) {\n    switchHiddenKeys(regularKeys, true);\n    switchHiddenKeys(shiftKeys, true);\n    switchHiddenKeys(capsKeys, false);\n    switchHiddenKeys(capsShiftKeys, true);\n  } else {\n    switchHiddenKeys(regularKeys, true);\n    switchHiddenKeys(shiftKeys, true);\n    switchHiddenKeys(capsKeys, true);\n    switchHiddenKeys(capsShiftKeys, false);\n  }\n}\n\nfunction handleSpecialKey(keyEl) {\n  const arrows = ['ArrowUp', 'ArrowLeft', 'ArrowRight', 'ArrowDown'];\n  const { code } = keyEl.dataset;\n  if (arrows.includes(code)) {\n    addInput(keyEl);\n  } else if (code === 'Backspace') {\n    deleteKey(false);\n  } else if (code === 'Delete') {\n    deleteKey(true);\n  } else if (code === 'Tab') {\n    insertKeyInput('\\t');\n  } else if (code === 'Enter') {\n    insertKeyInput('\\n');\n  } else if (code === 'CapsLock' || code === 'ShiftLeft' || code === 'ShiftRight') {\n    updateKeys();\n  }\n}\n\nfunction handleKey(keyEl) {\n  if (keyEl.dataset.code !== 'CapsLock' || !pressed.has('CapsLock')) {\n    keyEl.classList.add('light');\n    pressed.add(keyEl.dataset.code);\n    mousePressed = keyEl.dataset.code;\n  } else {\n    keyEl.classList.remove('light');\n    pressed.delete(keyEl.dataset.code);\n  }\n  if (pressed.has('ControlLeft') && pressed.has('AltLeft')) {\n    changeLang();\n  }\n  if (keyEl.classList.contains('special')) {\n    handleSpecialKey(keyEl);\n  } else {\n    addInput(keyEl);\n  }\n}\n\nfunction handleKeyUp(keyEl) {\n  if (keyEl.dataset.code !== 'CapsLock') {\n    keyEl.classList.remove('light');\n    pressed.delete(keyEl.dataset.code);\n  }\n  if (keyEl.dataset.code === 'ShiftLeft' || keyEl.dataset.code === 'ShiftRight') {\n    updateKeys();\n  }\n}\n\nfunction addEventListeners() {\n  document.addEventListener('keydown', (event) => {\n    const keyClass = event.code.toLowerCase();\n    const keyEl = document.querySelector(`.${keyClass}`);\n    event.preventDefault();\n    handleKey(keyEl);\n  });\n\n  document.addEventListener('keyup', (event) => {\n    if (event.code !== 'CapsLock') {\n      const keyClass = event.code.toLowerCase();\n      const keyEl = document.querySelector(`.${keyClass}`);\n      handleKeyUp(keyEl);\n    }\n  });\n\n  document.querySelector('.keyboard').addEventListener('mousedown', (event) => {\n    const keyEl = event.target.closest('.key');\n    if (keyEl) {\n      handleKey(keyEl);\n    }\n  });\n\n  document.addEventListener('mouseup', () => {\n    if (mousePressed) {\n      const keyEl = document.querySelector(`.${mousePressed.toLowerCase()}`);\n      handleKeyUp(keyEl);\n      mousePressed = '';\n    }\n  });\n\n  document.querySelector('.keyboard-input').addEventListener('click', () => {\n    cursorPosition = input.selectionStart;\n  });\n}\n\nfunction init() {\n  getLocalStorage();\n  generateDocument();\n  initLang();\n  addEventListeners();\n\n  input = document.querySelector('.keyboard-input');\n}\n\nwindow.addEventListener('beforeunload', setLocalStorage);\nwindow.addEventListener('load', init);\n","// extracted by mini-css-extract-plugin\nexport {};"],"names":[],"sourceRoot":""}